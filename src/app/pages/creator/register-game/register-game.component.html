<app-default-dashboard-layout>
  <div class="flex flex-row items-center w-full gap-4">
    <button
      (click)="onNavigate()"
      class="w-fit h-fit py-1 px-4 rounded-lg
      text-center font-black italic md:text-base
      sm:text-xs whitespace-nowrap truncate
      bg-orange-salmon hover:bg-light-salmon active:bg-cool-yellow">
      <p class="text-3xl font-bold"><</p>
    </button>
    <h1 class="text-start font-bold italic text-3xl w-full">
      {{ title.toUpperCase() }}
    </h1>
  </div>

  <section class="flex flex-row flex-wrap items-center justify-around w-full p-10 gap-5
  bg-white/10 rounded-xl">
    <section class="flex flex-col gap-5">
      <h1 class="text-center font-bold italic text-xl w-full">
        #{{ titlePreview.toUpperCase() }}
      </h1>
      <div
        class="flex flex-col gap-5 bg-white/20 p-4 rounded-xl
    overflow-hidden flex-shrink-0 "
        style="width: 200px; height: 283px;">
        <img src="{{URLimage}}"
             class="w-full rounded-md h-[150px] object-cover">
        <section class="flex flex-col gap-2">
          <div class="flex flex-col gap-1 p-2">
            <p class="text-base text-white">
              {{ this.userService.user.name.length > 15 ? this.userService.user.name.substring(0, 15) + '...' : this.userService.user.name }}
            </p>
            <h2 class="text-lg font-semibold text-white mb-2">
               {{ this.registerGameForm.get('game_title').value.length > 13 ? this.registerGameForm.get('game_title').value.substring(0, 13) + '...' : this.registerGameForm.get('game_title').value || "Nome do Jogo" }}
            </h2>
          </div>
        </section>
      </div>
    </section>

    <form class="w-1/3 max-lg:w-fit" [formGroup]="registerGameForm">

      <app-primary-input
        formControlName="game_title"
        type="text"
        label="Titulo"
        placeholder="Titulo"
      >
      </app-primary-input>

      @if (registerGameForm.get('game_title').hasError('minlength')) {
        <div class="text-start text-xs text-orange-salmon">
          Mínimo de 3 caracteres.
        </div>
      }

      <app-primary-input
        formControlName="description"
        type="text"
        label="Descrição"
        placeholder="Descrição"
      >
      </app-primary-input>

      @if (registerGameForm.get('description').hasError('minlength')) {
        <div class="text-start text-xs text-orange-salmon">
          Mínimo de 10 caracteres.
        </div>
      }

      <app-primary-input
        formControlName="link"
        type="text"
        label="Link"
        placeholder="Link"
      >
      </app-primary-input>

      <div class="flex flex-row items-center justify-around w-full ">
        <button
          [disabled]="!registerGameForm.valid"
          (click)="onSubmit()"
          type="submit"
          class="w-fit px-2 py-1 h-10 rounded-lg text-center font-black italic
          md:text-base sm:text-xs text-xs
          bg-orange-salmon hover:bg-light-salmon active:bg-cool-yellow disabled:bg-blue-950">
          {{ primaryBtnText.toUpperCase() }}
        </button>
      </div>
    </form>

  </section>


</app-default-dashboard-layout>
